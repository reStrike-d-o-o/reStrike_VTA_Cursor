<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Arcade Specials Overlay</title>
  <link rel="stylesheet" href="/assets/fonts/fonts.css" />
  <style>
    html, body { margin:0; padding:0; width:1920px; height:1080px; background:transparent; overflow:hidden; font-family: 'Fixel Display', 'Fixel Text', Arial, sans-serif; }
    #root { position:relative; width:1920px; height:1080px; }
    .flash { position:absolute; width: 560px; height: 560px; border-radius:50%; filter: blur(30px); opacity: 0; pointer-events:none; }
    .flash.blue { left: 15%; top: 28%; background: radial-gradient(circle, rgba(59,130,246,0.9), rgba(59,130,246,0.0)); }
    .flash.red { right: 15%; top: 28%; background: radial-gradient(circle, rgba(239,68,68,0.9), rgba(239,68,68,0.0)); }
    .flash.kick { animation: kick 600ms ease-out forwards; }
    .flash.tech { animation: tech 900ms ease-out forwards; }
    @keyframes kick { 0% { transform: scale(0.7); opacity:0;} 50% { transform: scale(1); opacity:1;} 100% { transform: scale(1.2); opacity:0;} }
    @keyframes tech { 0% { transform: scale(0.6) rotate(0deg); opacity:0;} 50% { transform: scale(1) rotate(180deg); opacity:1;} 100% { transform: scale(1.3) rotate(360deg); opacity:0;} }
  </style>
</head>
<body>
  <div id="root">
    <div class="flash blue" id="blue"></div>
    <div class="flash red" id="red"></div>
  </div>
  <script src="./shared.js"></script>
  <script>
    const { OverlayBus, mapEvent } = window.__ARCADE_OVERLAY__;
    const el = { blue: document.getElementById('blue'), red: document.getElementById('red') };
    function run(elem, cls) { elem.classList.remove('kick','tech'); void elem.offsetWidth; elem.classList.add(cls); }
    OverlayBus.subscribe((raw) => {
      const e = mapEvent(raw);
      if (e.kind === 'points') {
        const isBlue = (e.athlete === 1 || e.athlete === 'blue');
        const cls = e.points >= 4 ? 'tech' : 'kick';
        run(isBlue ? el.blue : el.red, cls);
      }
    });
  </script>
</body>
</html>


